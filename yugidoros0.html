<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‹•é»æ©Ÿç‡è¨ˆç®—æ©Ÿ</title>
    <style>
        body { font-family: sans-serif; background: #f4f7f6; display: flex; justify-content: center; padding: 20px; }
        .card { background: white; padding: 25px; border-radius: 20px; box-shadow: 0 10px 20px rgba(0,0,0,0.05); width: 100%; max-width: 400px; }
        h2 { color: #333; text-align: center; margin-bottom: 20px; }
        .input-group { margin-bottom: 15px; }
        label { display: block; font-size: 14px; color: #666; margin-bottom: 5px; }
        input { width: 100%; padding: 12px; border: 2px solid #eee; border-radius: 10px; box-sizing: border-box; font-size: 16px; }
        button { width: 100%; padding: 15px; background: #4a90e2; color: white; border: none; border-radius: 12px; font-size: 18px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        button:active { transform: scale(0.98); }
        .result { margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 10px; }
        .prob-item { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 14px; }
        .total-prob { border-top: 2px solid #ddd; margin-top: 10px; padding-top: 10px; font-weight: bold; color: #ff6b6b; font-size: 18px; }
    </style>
</head>
<body>

<div class="card">
    <h2>åˆå‹•æ©Ÿç‡è¨ˆç®— ğŸ¯</h2>
    <div class="input-group">
        <label>ç¸½å¡ç‰‡æ•¸ (N)</label>
        <input type="number" id="totalCards" value="40" min="5">
    </div>
    <div class="input-group">
        <label>å‹•é»å¡ç‰‡æ•¸ (K)</label>
        <input type="number" id="winCards" value="9" min="0">
    </div>
    <div class="input-group">
        <label>æ¯æ¬¡æŠ½å–å¼µæ•¸ (n)</label>
        <input type="number" id="drawCount" value="5" readonly>
    </div>
    <button onclick="calculate()">è¨ˆç®—æ©Ÿç‡</button>

    <div id="resultArea" class="result" style="display:none;">
        <div id="details"></div>
        <div class="total-prob" id="atLeastOne"></div>
    </div>
</div>

<script>
    // çµ„åˆæ•¸è¨ˆç®— C(n, k)
    function combinations(n, k) {
        if (k < 0 || k > n) return 0;
        if (k === 0 || k === n) return 1;
        if (k > n / 2) k = n - k;
        let res = 1;
        for (let i = 1; i <= k; i++) {
            res = res * (n - i + 1) / i;
        }
        return res;
    }

    function calculate() {
        const N = parseInt(document.getElementById('totalCards').value); // ç¸½æ•¸
        const K = parseInt(document.getElementById('winCards').value); // ä¸­çæ•¸
        const n = 5; // æŠ½æ¨£æ•¸

        if (K > N) { alert("ä¸­çå¡æ•¸ä¸èƒ½å¤§æ–¼ç¸½å¡æ•¸ï¼"); return; }

        let html = "";
        let probZero = 0;

        const totalCombos = combinations(N, n);

        for (let k = 0; k <= n; k++) {
            // è¶…å¹¾ä½•åˆ†ä½ˆå…¬å¼: P(X=k) = [C(K, k) * C(N-K, n-k)] / C(N, n)
            const comboWin = combinations(K, k);
            const comboLose = combinations(N - K, n - k);
            const prob = (comboWin * comboLose) / totalCombos;
            const percent = (prob * 100).toFixed(2);

            if (k === 0) probZero = prob;

            html += `<div class="prob-item"><span>å‹•é» ${k} å¼µ:</span> <span>${percent}%</span></div>`;
        }

        document.getElementById('resultArea').style.display = "block";
        document.getElementById('details').innerHTML = html;
        document.getElementById('atLeastOne').innerHTML = `è‡³å°‘ä¸­ 1 å¼µå‹•é»çš„ç¸½æ©Ÿç‡ï¼š${((1 - probZero) * 100).toFixed(2)}%`;
    }
</script>

</body>
</html>